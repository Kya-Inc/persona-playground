{
    "metadata": {
        "video_id": "CuINMVBoizE",
        "title": "Coinbase Speaker Series: Taylor Phillips",
        "link": "https://www.youtube.com/watch?v=CuINMVBoizE",
        "duration": "1:05:48",
        "channel_name": "Coinbase"
    },
    "transcript": {
        "0": "you you you you you ",
        "1": "you you you you final Mic Check I've never seen hesitate ",
        "2": "you check-check you okay good you you you ",
        "3": "you you you yes so we've got their their their directional like back now we've used all the other ",
        "4": "yeah ",
        "5": "Oh this is an RPC I'm gonna move blocker ",
        "6": "and blocker so my second where that ",
        "7": "I think you ",
        "8": "yeah [Music] ",
        "11": "yeah all right everyone get started all right so I will get a quick introduction to Taylor you guys probably already read his background a little bit but he worked at square for four years and ",
        "12": "built out their technology engineering teams contributing to a number of projects including their transition to a service-oriented architecture which the process of doing their multi data center architecture squares first data warehouse their first automated loft pension system and of course worked a bit on fraud prevention as well especially using machine learning which of course oops heading up for us here so as a manager Taylor interviewed hundreds of engineers across all disciplines and focused on building culture where both data and people could succeed together so please join me in welcoming Taylor so I've got a few questions we'll go through and then we'll probably at the end open it up to the audience and let them ask you whatever was on them it's good so let's start off maybe you can give an overview of how how the square use machine learning to fight fraud like ",
        "13": "maybe generally as an entire industry like what's the what's 20,000 foot view how do you fight fraud today like what is the best in class solutions they're out there yeah so there's a couple different types of fraud that we look at it's clear the ID verification so we go through the KYC process of knowing all the merchants that we're gonna underwrite and bring onto our platform and so the way we thought about risk it Square was largely around settlement so we take those payments once we take the payments they actually go to square and then we have a time period that used to be in the industry like a month and we turn that into 24 hours so we hold that money for 24 hours and we during that time we can do any sort of risk review whether that's automated like manual operations looking at specific payments or specific specific actions and then what we could do is settle that out at the end of the ",
        "14": "night and our goal was to shrink that as much as possible so recently we want launched instant settlement which means you can actually like click a button and pay a premium to have that money move to you right away and so really what we're trying to do there is get at that a risk assessment is to real time it's possible time that got it okay and what's been the blend of using machine learning versus other techniques maybe manual reviews rules engines like what are all the components that go into it and what it what's the right blend of it yeah that's a great question there was an article written recently and I really like the phrase that they use they called it human-in-the-loop machine learning so I think it's it's a progression the way we did it at square is we started with all manual reviews so every merchant that signed up a person would look at them Google for them look at their face book call them on the phone get an ID you know all that sort of stuff and as those humans would learn ",
        "15": "about what they needed to make good decisions we would start to automate bits and pieces of that and so you can think about it as like it starts out 100 percent manual and then we learn more about how we can like what types of fraud are happening and how we can catch that and we incrementally move it up as we get more data you know you want to you want to balance paying for bad data you want that signal to be able to identify it but it's at the fine line to walk so we started by having some really high level metrics around user experience so we didn't want the negative use those false positives we mark something as being fraudulent and then it's not fraudulent and then somebody is really upset that they couldn't get the money that they took so we paid a lot of attention to those metrics and we would drive toward the certain a goal that wasn't no fraud because it's really easy to not have fraud you basically can turn your system off and say oh there's no fraud where you can let your costs go ",
        "16": "through the roof and pay a lot of people to review that so our goal was to march towards towards metrics that we looked at that our analytics team would drive and we would use more and more machine learning to get there and invest more any third-party data services and better models eventually bringing like the models in-house really tailor them or they use cases that we were seeing yeah actually that's a great point what it what is the best way to measure the performance of a fraud program well I think there's there's no silver bullet there um I think it it several metrics yeah what are the what are the biggest guys would watch well I think that the the metric we cared most about was the user experience so we really didn't want to have we did want to be upsetting too much too many merchants we would rather lose money then then have a lot of people you know make negative press about about the square all right ",
        "17": "so you know the machine learning you want to think about like precision and recall and precision means how accurately you're catching those fraudsters and then the recall being how many of the fraudsters you catch and it's a balance between you know catching all the fraud and and that operations cost and so what we cared a lot about was keeping headcount sublinear to the volume that we were transmitting on square and so we pay a lot of is a balance between dollars lost and headcount expense okay and I imagine you had to improve a number of tools along the way and everything to look into that like what were some of the you advise a lot of companies now on how to build out their fraud prevention solutions like what are the common mistakes that you see people ",
        "18": "making and then like conversely what are the what are the low-hanging winds that like you're your biggest ones that you recommend to people always that they're not doing yeah yeah that's a great question um I think I think it's a balance of starting with the easiest win I think the best thing you can do is use some open source stuff you don't need to get really fancy with your models and paying for better data I think the best thing you can do is is try some of the open source stuff that's out there and and see how it performs and at your scale I imagine you've tried some of those different different things and see how they perform I think the biggest the biggest risk that you face is trying to automate too much too early and that can get you into a hairy situation where you don't have that signal that your ket your you're having a negative user experience until until you've already ",
        "19": "impacted those people and you you know you and working on 2ml what other areas of the business with it with the most valuable you know we've thought about using ml clients scoring growth stuff in squares case what was it curious yeah being able to use the machine learning platform that you build other parts of the business is a great idea I love that and for us like the biggest the biggest area of impact was that that risk loss piece but eventually we did use it for automating customer support our meeting our some of our compliance our charge backs and that sort of stuff so yeah I think the biggest piece for us was risk and in building a platform that we knew would generalize to those other use cases and I think that a really awesome side effect of that is connecting all the different pieces of the organization together because you have those the the analytics folks the compliance folks the risk folks the ",
        "20": "engineers and the product people all need to intersect in the right way and so I think that that data is a great intersection for building culture of communication and kind of driving toward the the best overall decisions did you guys end up using it in a compliance aspect at all yeah we did we ended up automating a lot of our chargebacks in particular that was one of the big ones that we did and then you know there's also a progression where you go from full automation and first is having tools to make those operators more efficient and so there's a way where you can build compliance tooling like maybe this is like a UI where they have some filters and search criteria and other stuff and you can do like a best effort with the model and then incrementally move towards towards full automation but empowering those operators to understand more about what's going on with with the compliance ",
        "21": "stuff which I imagine is like really hard at coinbase I was at an SF Fed innovation event recently and they're not very innovative over at the Federal Reserve and actually the they talk about Bitcoin and coinbase a lot when I was over there which which I thought was anything good or bad I'm curious they're they like what you're doing and it's definitely putting pressure on regulation to move forward and there's there's a lot of banks there and they're they don't like it obviously it's you know they like their business right now where they get to not improve the infrastructure at all and have slow payments and and they're making a boatload of money doing that so it like I loved it that there's pressure on them from that perspective yeah so the like the three do care about some important stuff which is like you know the money laundering is something that we all all care about and so I think it's great that Bitcoin is like helping and the coin base in particular is helping the world move forward and putting pressure ",
        "22": "on these these legacy banking systems one of the areas that we always are focusing on is our Bank partners are very concerned about like certain merchants or high-risk businesses that are on our platform and I'm curious did Square go through a similar period like that or maybe they still are - it's just always there with the business I don't know but how did you guys work on that if it was an issue what kind of like what's your customer - business like rate do you have mostly businesses or dislike customers buying for businesses or mostly consumer but the businesses represent a higher risk yeah so the the way that a regulator would think about the since versus the customers is a lot different so they care a lot about protecting the the consumers so they're they're gonna have more rules there and it's hard to you know catch a bad customer but if it's a ",
        "23": "merchant that you tend to have more stuff they kind of have like a Facebook page and a physical location and things like that so Foursquare it was all about the merchants that we were looking at and eventually we grew into peer-to-peer stuff but with the merchants side that underwriting piece that upfront decision to say you can use square that was a metric we wanted to drive as high as possible like to 95% of the people we put on the platform and so so we cared a lot about that decision but we also wanted to think about it like letting as many people on the system and then having like kick-ass really complicated stop on the back end to make sure that we caught them if they did something that was wrong and so the good thing that the the luxury that Square had is that 24-hour window where we could watch and see what was happening so do you guys do any sort of like real-time because at a per transaction settlement or do you guys settle like nightly there's certainly a delay to it yeah when people buy we oftentimes wait to ",
        "24": "pay them out and then if it's a merchant trying to cash out will withhold it sometimes for a day or so and try to review it but yeah withholding the payout is obviously a way to mitigate the risk um maybe you can tell us a scary story like what was uh what was something bad that happened where they caught you guys off-guard or it was like a really contentious decision internally that people got really heated about like you know the the near-death experiences yeah there's actually quite a few of those um like we could talk about engineering stuff or risk related stuff any of those yeah it was a bad day at the office all right so there was there was a time and this is like this kind of a service or engineering piece like surface oriented architecture which for us also entailed the move from Ruby to Java as like our back-end and in Square had a lot of culture around like Ruby and the ",
        "25": "development philosophies that that Rubeus liked and then there was a shift to this like hard core back-end rigorous Java Java stuff and it's quit that split squared sort of down the middle on engineering and there were factions of people that were in like the Ruby camp and the Java camp in you know people like engineers yeah they're very rational technical folks but you know we're all emotional entities and any like you care about that stuff and so there was a lot of you know qualitative like this tech versus this tech talk but then there was also like you hurt my feelings because you know you set this thing about rails and you know I guess from they laughter you guys are having some fun with rails right now we love it yeah so that was a that also came at a time that was very momentous per square it was when we were bringing on Starbucks so we had which didn't work ",
        "26": "out so great in long run but we scrambled really hard to really upgrade our architecture to be like this enterprise level architecture like this is a serious business so we moved data centers to do it and so by the time we got the new data center the people who were rewriting all that stuff Starbucks were doing it all in Java and in the Ruby folks had to follow along eventually but the Java people had already made it their home and built the stuff that they wanted the way that they they liked it too like we used protocol buffers as a specific thing I don't know if you get these like a data format like that which I'd be a fan of but the Ruby support wasn't there and so they couldn't integrate and they're like the Java guys didn't do enough stuff for us and and so it was a you know I think it ended up working out well we have a good balance between using Ruby and using Java still today but it was it was a heart it was a heart path to take and there's no like right answer there's no you kind of need it's one of those decisions where it's not clear what the ",
        "27": "best decision is and it's best to just have unity behind a decision rather than fragmentation and like this were thinking around what that out solution was yeah interesting I'm curious what was the culture at square maybe even like in the early days versus as it grew and you know what were some of the really great things about the culture and then what were some of the things that with 20/20 hindsight you know we're probably mistakes one of the one of the cultures I really liked was round pair programming you know it's there's a lot of ways to think about but using it in using it where it's it's helpful in not me not being dogmatic about it really helped inspire a culture or sort of a mark junior person it could sit next to someone with a lot more experience this Square and ",
        "28": "get up to speed really fast and like as a manager you might look at like the net output of that team or whatever and there's a lot of qualitative stuff that comes out of that you know like happiness and and also like how quickly somebody can ramp up which isn't really direct output and and so I think that like that culture was really great it was hard to keep that so eventually that sort of phased out it was still part of our interview process but I was sad to see that sort of Wayne Wayne away something that didn't go so well mm-hmm I guess around culture I'd go towards the way that some of those decisions were made around like moving to Java or changing data stores that's another one that engineers like the you know but but heads about or protocol buffers versus thrift or something like that so I think Square tried two ",
        "29": "different things in neither of them ended up being like getting the result that we wanted one was around like getting a committee to make a decision and I think would you like get behind and I closed doors and then you come out with an executive decision it's it's a lot to like maintain the transparency that we all want in a company and the other was the single leader making an executive decision and I think that either of those can work but it's really around helping everybody follow along with those decisions and understand like why they're being made and understanding that there are trade-offs and that that were explicitly making those trade-offs got it yeah a couple that's I mean the programming is interesting i we've we've tried it out and I always feel like I'm struggling a little bit to get everyone participate but some people really like it some people don't I don't know so it kind of ties into your second point was about like where was the team leader is making some decisions for doing these committees ",
        "30": "getting buy-in I don't really know what my question is on that it's like it's it's it's hard to get people to all move in the same direction and there's not really just one right answer so it's about like consensus building or I don't know how would you phrase it any lesson yeah yeah it's about like the process for decision-making I think and actually I'm curious about your programming thing like which what's your motivation and in wanting to build programming into the culture two things one is that I I kind of view it from my own perspective you know history as it's like going to the gym it might not be the most fun thing today but it'll pay off in terms of long-term health and happiness because there's information sharing happening between people so you start to learn other pieces of the code base that you might not need know about it also involved it creates learning in the workplace like some of the things that made me a much better programmer was watching somebody else code and being like whoa how did you just do that that ",
        "31": "was way faster than I'm I've been doing it every day so yeah basically learning and knowledge sharing yeah I think those are those are great reasons especially cross-functional so if you have I don't know you like your settlement stack or your you're like we call payments I guess it's maybe called a little bit different here versus like your front-end folks or the compliance tools that are being like internal tools you know having having like big programming across those boundaries is super effective in terms of like having somebody learn how the other team is doing stuff and that's really valuable as like to build an engineering culture and to solve the bus factor problem where like one person kind of knows how to how to do a thing and and teams are doing some things differently so so I think that's a great great reason that like he gets hit by a bus yeah yeah that's the he get it by bus the yeah you don't want a plus factor of one which means one person gets hit by a bus and then nobody knows ",
        "32": "how to do something innovation which is actually like a KPI to watch a few guys hurt hurt the bus factor thing before yeah okay it's sort of a negative thing but but it highlights something important which is and it's also around learning where you don't want to have one person having all that tribal knowledge in their head and sometimes it's hard to write documents and and disseminate that information and sometimes the best way to do that is just by sitting next to somebody and even if you're even if you just have the keyboard in front of you you're not typing a lot you just get it see somebody else's workflow and see the hotkeys that they're using or seeing that they use team-ups in this way and it's really cool so yeah I think those are solid reasons so you've built out some big teams interviewed probably thousands of people I don't know how big was the team you were how many people would you say that you were just fitted in hiring it at square hundred yeah I interviewed like there was a time when square was growing ",
        "33": "really fast like we were doubling more more than every year and we did a you know we wanted to keep that engineering bar really high so we didn't read a lot of a lot of folks so yeah I did you know leave three to four hundred interviews skewed skewed more towards the latter years at square and the the team that I was managing was the machine learning team but which grew to about 20 engineers data scientists and that we split that into three teams you know for me the optimal team size is that subtend number of five to seven I think is really ideal and I think that's ideal for both the team and the manager other okay yeah and what were some of the your philosophies you developed over time about hiring like maybe made some bad hires maybe you started to change your hiring process like what what is it what is a great hiring process look like yeah I think that's something that squared square did really well our CTO Bob Lee you know came from Google and had led Android there and so he built squares ",
        "34": "first Android app and a lot of his focus was on hiring recruiting and I think he did a really good job of bringing in that talent and setting setting a high bar and the process that we use to interview folks and I could talk more more about that so like one of the one of the things that we did was pair programming in interviews which I'm a big fan of because you get to see you to sit next to somebody and like kind of talk to them and sometimes they'll bring their own laptop and if somebody were to do that then I sort of expect them to do a little bit better during their during their interview like using their own tools and things like that you like closing candidates I don't know let's do the bad hire one actually yeah okay so so when I became a manager I was really excited about like building a strong team and hiring super senior folks right like that's super senior that's a phrase that we'd like to round and and there's it's it's a bit of a ",
        "35": "double-edged sword where if you have somebody with a lot of experience oftentimes they know exactly what they want to do and they're they're very opinionated and and they they want it done in a certain way and that can be really challenging on a team and it can bring down morale and it you know what I ended up learning was I I really liked bringing on somebody new with less experience who you know was excited and eager to learn and hadn't been trained with ways that you know the wrong ways so that was a big change that I only learned through managing a team so I feel like we could dive in so like way deeper a bunch of these topics like the technical stuff the management the hiring of the culture let me ask just one more then we will turn it to the audience questions if you guys have any I think we have a patch box around here people want to grab that but baby um let's talk a little bit ",
        "36": "about cross team collaboration because I imagine a lot of people were interested in but you know was happening with God and ml the various risks in the company and you know those issues are challenging sometimes like what what should be the priority like how do you ensure there's good communication to all the different departments about what's even happening right these are some of the things that we've had to really work on as we've grown too so yeah do did you guys experience that and if so what what were some of the things that you did to help it yeah so I'll insert it into parts will come back like the collaboration part but you so you're about 70 70 folks right now yeah in the house 70 here 100 remote Oaks okay so that's a great number because you could kind of look over your desk and see everybody and once you cross ",
        "37": "that 200 person mark it's hard to keep all the names and faces in your head and and then all of a sudden you're siloed into a team so I think like the size that you're at is awesome for for that cross team collaboration and most of the challenges that we encountered for that cross DEMA collaboration happens later on when you start the scale so some of the ways we solve that when we started this scale was by bringing people from all the different teams together and I think that that changes as you kind of move up in the headcount way but having having the person making internal tools also working with the people who use their tools is an awesome luxury and so being able to bring them together and and have you know report across customer support and compliance with the engineers making tools is awesome so some of cadence for internal present presentations I think is a super helpful to help build that that kind of culture ",
        "38": "you mean like somebody internally would present on like what is the finance department do every day like that kind of thing the internal tech talks a little bit internal tech talks are great a little bit different than that so with with like the risk and fraud stuff as an example the first team that was done that automation stuff was myself and two other folks through their engineers and then there was the risk team and we were the only engineering team that just we decided just to sit next to all the risk analysts so these are people who write you know good sequel themselves but they don't do any Production Engineering and so what we would do is like we had that really fast collaboration where I could be like hey like check like a peek over my desk could be like hey check this out and they got to like look at it and get feedback and then at the end of week we'd had some sort of sort of forcing function to say here's what we delivered this week and so we'd get in a meeting with the the three engineers and then all of the analysts and then the operators as well and we present what we ",
        "39": "added to the toolset and then also have the operators who were doing it in the analysts I'll present their stuff so analysts decided they caught this new type of fraud and the operators would say oh this new fraud happened and we didn't catch it and here's some ideas we think to have that and in that is great because it helps kind of everybody feel important and be connected to all the other work streams that he thought actually I'm gonna ask one more in the audience so you know square is a company that was very much in the public eye you know everybody was always had some opinion on it it was like they were geniuses and then they were it was all pod and you know even right up to the IPO everyone is speculating constantly the armchair philosophers done yet but I hope it is yeah now your public company so right we we were talking about this the other day how sometimes I feel I'm guessing it kind of running a Bitcoin companies a little bit like a public company cuz everyone's watching the price of Bitcoin right how did that ",
        "40": "affect the culture internally people you know there remember people writing bad stuff on Quora and then there's always some kind of scandal they every every time you the end of the core of post yeah I mean every every successful tech company has this right they have like the press likes to build them up and then they tear them down and like how did that affect things internally at square and hiring the culture all that them yeah yeah that's a great question um I think that the press the press has like different motivations then what what the company has or what like a true assessment would be and and so I think the square was you know overhyped at the beginning you know was exciting it was new it was kind of that sexy iconic Apple like feel and you know you got to see it out live in in the marketplace and and that was great and then sort of when you're overhyped I think there comes the like it's sort of like a clock ",
        "41": "that the press cycle follows and you know Thoreau knows all that yeah the unicorns is is the term that I've yeah and there's bunch of terms that go out there but it definitely had a huge impact on morale when I don't think hiring headcount that was was significantly impacted it was something that we had to address almost every engineer that we'd interview it's like we make an offer and then they're like what about the and we you know we all had our talking points like laid out on how we responded with a unified front to that yeah so so it's a challenge I think it's also some of those it's sort of an analogy with like fraudsters like you you get off you catch a fraudster and then they go post a terrible review about you right so there's that and then there's somebody really had like wasn't a good fit for the company and then they had a bad experience and they write a bad post and it's also that was really thoughtful it you know just a true statement and I think that both of those the different ",
        "42": "degrees helped it's sort of its feedback to the company about what they can do differently so I think that it should be taken with respect and you can you can learn from it and I think that that helped us refine some of the story that we had and the culture that we were trying to build in the public ledger is it is an interesting point I didn't quite think about it from that angle that you know that's it's out there yeah and Bitcoin people you know it has a big effect on us do you like how the overall market is saying but yeah I think definitely coinbase is a company we haven't really had our really big like scandal yet or you know tell-all piece or whatever it ends up being so I'm I'm sure we'll get a couple good ones before you know the IPO someday okay so let's let's turn it to the audience here and why don't you guys ask any ants on your mind yeah do I have to okay cool this works all right so you kind of mentioned offhand like third-party anti-fraud integrations I've ",
        "43": "seen you're talking about stuff like like email analytics or phone analytics like background stuff do you feel like those types of integrations is it better to have a couple high quality ones you think it's more important to have like a lot of small ones to feed into machine learning and kind of follow the is there any third party integration that you think was like really clutch Foursquare yeah that's a great question um it touches a lot of a lot of points so about the like volume versus quality sort of thing yeah I think I think quality matters the most they're there because it becomes a time when it makes sense to just add more and try it out but with the machine learning you care about orthogonal like perpendicular signals like you don't want the having two things that correlate they catch the same thing and correlate with the same thing don't add value um so you want to be like intentional on what you're bringing on we did use you know things like the ",
        "44": "typical ID analytics and other ID verification services that do your your phone number and and that sort of stuff I think the biggest thing that that helps square achieve like Amazon like fraud statistics with this long tail of merchants with which people thought was crazy at the time was the the iPhone and in a physical device and not just the iPhone but but Android and what we found was was we did our own device fingerprinting with that so we would we'd monitor those and you know had like a graph and how people were connected and there's a third-party service of science that does a good job with that so a big fan of those those guys so yeah that what we found with the device in particular is it was really good at catching organized fraud and it made the cost to commit fraud really high on square platform and we would catch organized fraud rings actually sending iPhones across the country and doing ",
        "45": "different things trying to link different social security numbers and stuff like that to those devices and and because we had those that graph that like social graph or however you want to think about it mapped out we were able to catch a lot of those and know right away that this was fraud like there's no doubt in our mind that that was fraud you guys have any success working with the busting these guys there was it the extradition and all that stuff yeah we did have some interest in cases I mean there was there was like a bomb threat made on square and we ought to like not come to work one day there was there was a set you know some cases where you know they'd find somebody's phone who-who-who and they saw that like they they raided someone's apartment and they found a square and this person had committed all kinds of you know criminal activities and so they came and asked us to find out their location and so we're sort of put on the spot do we protect our people or do we you know wait for a subpoena or whatever and so yeah you ",
        "46": "know it's I think it's we live in a world where we have all this data and you know Google and Facebook and all that stuff and I think it's a fine line to walk between doing doing the right thing for people and there's no easy way to cut that up we have a lot of dilemmas I mentioned those are like money laundering stuff or oh all kinds I mean it's some of it is you know things like that customer data well how do you guys we got so many problems do you let me to like so for example square took the stance here to not sell you couldn't sell guns you can sell marijuana things like that which were contentious in different states and things like that and in you know touches on policy yeah I mean we definitely have prohibited business first it's funny the original version of it my you know I ",
        "47": "started the company was like I want anything that legal be allowed and then I meant we went to the banks and they were like you don't have a prohibited business list and and I said well our policy is just we allow anything that legal we try to defer that decision we don't want to pass judgment on their customers they were very uncomfortable with this I remember I went to our legal team and I was like all right we need to draft a good business list can you just make a list of things that are illegal and make that a business list but over time like the banks it's really it's really more the bank's decision than it is ours often and so that that list has slowly gotten more and more specific actually I think we're trying to support some of marijuana businesses in certain states like there there is sort of a sweet spot for our customers they're they're interested in Bitcoin because of the things that it can offer but because we're always working we have a foot in both they have a foot in the door and you world and in the traditional banking world and increasingly we have to be more and more assertive in the ",
        "48": "traditional financial world Jim yeah what was kind of the the data culture was it like test everything before building it was data like self-service where everyone's running queries or do you just sudden things over the data guys and they give you an answer oh yeah this is this is a fascinating question and there's different ways to answer this as Square progressed so when I joined Square in 2011 we had like Bob my sequel master database which is all the stuff in it and we had some like read slaves and it was like a trigger base for application and this complicated replication chain people changed schema and would break and different parts the business break but what was happening was those read slaves were being used for for like risk analysts and they would go run these big queries and it would just hammer the database and it would just fall over and then all of a sudden like we're not able to take payments because that was happening so yeah there so there's a big challenge around especially with PII and PCI data around who can access that and ",
        "49": "you know you you get audited I imagine you guys have some sort of PCI compliance piece ya know PCI but lots of audits okay so yes so there's there was a big challenge around how do we get that how do we how do we let them access the data that anybody should access and there was a big a negative a negative tone around infrastructure so we didn't want to just have infrastructure we had a team called core services and like it did a bunch of good stuff that I liked as an engineer but the execs and a lot of folks didn't quite didn't understand it and I think that speaks to like both pieces like we could have done more to explain what they're doing but we wanted product align teams so Square didn't have a data infrastructure team for a long time and we reached a point where it was really painful at the scale our single my sequel host and we had to pay thousands of dollars per fusion-io to do that and ",
        "50": "it was really painful because we needed different different read slaves for different people to have access to and those became really expensive so eventually we we built a first-class like data pipeline and they used like Kafka to put all our events in there and then they go into horizontal scaling store like HDFS and then that became our canonical store and then that was great so we're like here the the place where all the data is and then it became around building tools like sequel is really great for doing you know the analysts are trained with sequel they get it they it does some stuff really well and that there's not parity of toolset or HDFS there's like hive and all that stuff but it's gonna have its limitations and so I think that for the since 20 2014 and later it's been focused on solving that problem but in but our goal was to remove that loop of talk to the data guys it was talk to the data guys the data guys make it so you can access your data and you only have ",
        "51": "to talk to them when it's a problem we had SLA s around that data uptime and and stuff like that so we we wanted to make it so that you could get the data you were allowed to get to the hard path a similar maturing of our industry so I think we've got the first class by plant a to pipeline going yeah you have the event event driven like append-only stuff going on question yeah soups let's get you a cashbox now I know it's called the catch box so uh could you elaborate a little more about you data pipeline so was this used primarily for analysts or was this also used by data scientists and also we're using it for machine learning basically yeah we wanted we wanted to have you ",
        "52": "eventually you have to denormalize your data and have it we wanted to be as normalized as possible and have a source of truth because we have to reconcile our books so that what the risk analysts are looking at is the same thing that the financial analysts are looking at reconcile so eventually we move to a world where we had all the data in HDFS and we would transform that data for the specific use cases one of those cases was machine learning but we wanted to have that there like source of truth that we knew every like that was the thing if that was wrong then we needed to look at it but we knew that that was the starting point and then eventually we built a machine learning cluster so Square didn't have the luxury of having Amazon at the time because it wasn't PCI compliant and so we had to do our own own data warehouses so we built we got some really fancy machine learning machines that had half a terabyte of RAM and we would build that like sort of a custom pipeline for those things it'd get the data out of HDFS move it over to ",
        "53": "those to those machines and then train a model there and so the like that tends to be more tech that team tends to be more technical than the analytical teams and so they can write more you know back-end code to do the ETLs and then like get that into their their model themselves that answer your question yeah so just as a follow-up to that so it was it at what point did you hit the the the bottom leg off you know using let's say MapReduce to extract features but then you're building your machine learning algorithms did you have to paralyze that as well or was that you know you were able to get away with just running it in a single core the actual training yeah so well there's there's two parts of the training right there's the feature generation and then the training piece and like this is a great question because this is a notorious pain point like these can take days to start training model and and we would watch that like one of the one of the metrics we cared a lot about was how quickly you could train a model end to end and we did a ",
        "54": "lot of effort there to speed that up that was like getting the machine learning cluster that could train a model in parallel and we went as far as implementing our own random forests and boosted trees and stuff like that to make that faster and to give us more control over it that was that was much later on in our lifecycle and around the future generation that there was a time when you know that was the limiting factor and that was encroaching on our 24 hour settlement period or it's like if if we had to retrain features for some reason like that would be a huge problem for us so we weren't putting out new models very often at that time and that was that was you know that cost us dollars so we did a lot of work to build those in parallel eventually and one of the hard things that we faced there is when you're you're doing I'm up with a Hadoop job you're you're building our features that's like a fundamentally different piece of code that's building ",
        "55": "your features then is is actually like keeping them up to date in production but that's that's a huge challenge and you know we thought about that you know really hard and using Java happened to be a nice piece of like commonality so we could actually have the same piece of code eventually that you'd use offline to build your features and then online to keep them up to date actually soups is working on the next generation of our machine learning architecture so you have five minutes at the end and you want to take a peek at it maybe we can get you yeah yeah I'd love to do that yeah transition between two fundamentally different machine learning models and if so there any interesting lessons learned at that transition yeah so I think the biggest transition was from nothing to something and in the first part was logistic regression so this was all just like we used psyche at and then we ",
        "56": "didn't like to have Python in production so we would we did a weird serialization thing so we could get that in our normal production flow philosophically I feel like new models aren't usually the best way like it's a good thing to come reassess that and inform hypotheses and try it out for us we then moved from logistic regression to random forests and and you know those are easy to conceptualize and easy to train quickly and there's a lot of good open source stuff from that and then eventually we've moved to some like boosted trees when we got a little fancier but the random forests are still the bread and butter and and those worked really well for a long time so as a follow-on did you sort of go with sort of an ensemble approach during these transition periods where you have both models running in parallel or did it just go from A to B and just let ya ",
        "57": "know a great question so the ensemble piece is something that we wanted to do for a long time and and we'd get some lift from that but the transition pieces is much more interesting so so you have like a model live in production it's been running for a few days or whatever maybe a month and you trust it right it's king you're happy with it and then to deploy a new model has risk associated with it and it's a hard thing to do especially if there's like new features associated with it and stuff like that so well what we did was have what we could we have good parallel architectures so we have like a blue environment and a green environment and they're both production but one is only live like doing risk at a time and the so we'd have like your active one doing the stuff that's doing in production and then we deploy our new model to this other one and we'd watch it for a period of time and then get some feedback from it and then say okay we it's good let's move it over and that was really important for us because if we mess that ",
        "58": "up if it's like you you're off by one and all of your features are off and your models putting out garbage it's like we'd have to go tell the company that a we lost lost a couple hundred thousand dollars a day because we messed this up and and you know we didn't like doing that so the the blue-green architecture was is really heavy but is one of the best ways to empirically try something else in production and know that it's going to work so just as a follow on to that so essentially saying that it's hard to do a/b tests in a setup like this right so you can't really have like two different models working in parallel so I'm as if I understand you right what you're saying is you are basically just storing the scores from one of your new models and just doing a back testing later on yeah that's right we literally have them in in production and I think this is something that would eventually be automated that whole transition we just didn't get there yeah you could imagine watching it and as your confidence ",
        "59": "increased like you did that that test thing then you could like either unsolved them together and give it weight over time or just make that that flip over other questions was the switch to Java worth the trouble I gotta get in trouble if I answer this either way what's the right answer I don't I don't know my opinion okay so alright gosh is here I like you I grew up like writing C++ so I in Java kind of came after that so I like static types that's that's gonna be like the biggest thing like I like knowing that like otherwise if it's if it's Ruby then I still have to know what type that is I just the compiler whatever you know it's not gonna help me do it and you can have your checks and things like that so so I like I like Java in our ",
        "60": "environment because it was it's so mature like the Ruby passenger stuff and the threading model and all these all these challenges that you face like the lack of support protocol buffers and and just each each each of those like death by a thousand cuts you're spending a lot of you could do some cool stuff like debugging live production systems and you know it can be great but Java is just so mature and there's such a great community around it and we had a lot of great Java folks so I think it's like serendipitous in that regard so so I really like to switch the Java because we could reuse a lot of a lot more open source stuff that was was trusted and and you know I'd end up writing very little business logic like it would just be use all this open source stuff and you know the way dependents like though all the different gems and things that are out there it's it's a lot more ",
        "61": "effort to stay on top of like what's good and where things are at and so I think you can go go both ways certainly like there's one other pieces that Java naturally plays well with the Apache Hadoop open source ecosystem which was a great boon for us that save us a lot of time maybe one more question so could you tell us a little bit more about the composition of your team as to how many engineers data scientists and data analysts you had did you ask about jr. versus senior in there rather you know how many data scientists versus software engineers and data analysts yeah yeah that's a great question I don't think there's a right answer to this I'll talk about what what we did but in general the way there was an article written and I and I forget who wrote it but I cite this all the time um where you can think about like the output of a team is like a box and that ",
        "62": "you you need that whole box to be colored in to be performing as well as you can have like a full output of the team and everybody like humans are actually like weird squiggly shapes and so it's like the manager's job and and it kind of everybody's job to like fill in those gaps and so I think that there's there's like the ideal team as you conceived before you have anything like that blank slate ideal scenario but it really comes down to like what are the strengths of your team and like how do you balance that out and so that you can fill in that whole whole box so the way squared did it was in it would Square it was less about like we had a lot of analysts and these are people who these are like the physics PhDs that sort of go into Wall Street now come to the Silicon Valley and and they do you know they do great you know an analytics work in data science work to like investigating what's going on and and that was I had a few of those people on the machine learning team directly but a lot of those people would be on functional themes like the risk team like machine learning facilitated ",
        "63": "customer support and compliance in those other pieces and then there's that domain-specific risk team which had its own data scientist doing specifically one product and that was an important separation because the actual machine learning work for doing it in production is a heavy engineering work where you need more it's kind of like I don't want to say boring but it's it's very straight it's like a methodical and you need someone to hack be able to understand what those data scientists care about but be able to build be able to build the thing they get that stays alive production so what we had was you know 20 engineers and several those people also carried the title data scientist so it was on the machine learning proper team there were 17 engineers and then three data ",
        "64": "scientists to try to give you a straight board so skewed towards engineering yeah it's it's all about the operations in production so I think we're about at a time I guess maybe it's the closing thought would be you look back on your time at square you know four years ago they were fast growing company maybe a closer to our size and now it's been four years you know you went through a pretty incredible experience like if you if you could look back and put yourself in the shoes where you were they're like I don't know what advice would you give yourself any any ideas come to mind or like when you reflect on the experience yeah it's a great question let's see I would say that you know some of the hardest times when when there's like a really tough deadline or something's not working the way you need it to and like the business needs it to work and like you look at all your friends you're like if this doesn't work like I'm gonna let ",
        "65": "all my friends down you know those are the hardest times but there's also like the most fun like that that's personally what I thrive on so I would have enjoyed it more and instead of just be like oh I have to make this work and and work really hard you know that like those are those hard times or what I look back on and like that was friggin awesome like that was really fun yeah it's funny when you look back on it it's always like that was the team like gel there's so much bonding cohesion in the moment it just feels like frustrating and scary but totally cool well thanks for taking the time to spend spend a little bit of time here with us and let's let's all give a round of applause to Taylor thanks for having me "
    }
}